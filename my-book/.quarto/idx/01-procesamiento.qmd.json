{"title":"Procesamiento","markdown":{"headingText":"Procesamiento","containsRefs":false,"markdown":"\n```{r cargar-paquetes,echo=FALSE,warning=FALSE,message=FALSE}\nrm(list=ls())\noptions(scipen = 999)\n\nlibrary(pacman)\np_load(tidyverse,\n       knitr,\n       bookdown,\n       car,\n       sjmisc,\n       sjPlot,\n       sjlabelled,\n       psych,\n       kableExtra,\n       gridExtra,\n       lubridate,\n       viridis,\n       statar,\n       readxl,\n       tinytex,\n       ggrepel,\n       ggalluvial,\n       survey, \n       httr,\n       readr, \n       ggplot2, \n       labelled,\n       shadowtext,\n       stringr)\n```\n\n## Cargar datos\n\n```{r datos,message=FALSE,warning=FALSE}\ndata_raw <- read_excel(here::here(\"input\",\"data\",\"Fondecyt Prof Pablo Pérez-Conclat, ultima version - 31-03-2025.xlsx\"),sheet=3)\ndata_dec <- read_excel(here::here(\"input\",\"data\",\"Fondecyt Prof Pablo Pérez-Conclat, ultima version - 31-03-2025.xlsx\"),sheet=2)\n```\n\n## Selección de variables\n\n```{r data,message=FALSE,warning=FALSE}\n# Agregar ponderador desde base decodificada\ndata <- merge(data_raw,data_dec[,c(\"ID\",\"rake_wb2\")],by=\"ID\",all.x=TRUE)\n\n# Selección de variables\ndata <- data %>% \n  select(id=ID,\n         a07,\n         rake_wb2,\n         # Var independientes\n         b19,\n         b21,\n         # Var dependientes\n         c04_01,c04_02,c04_03,c04_04,\n         c10_01,c10_02,\n         c11_01,c11_02,c11_03,c11_04,\n         c08,\n         # Var mediadoras\n         b06_01,b06_02,b06_03,b06_04,b06_05,\n         b11,b12,\n         # Var control\n         sexo=e01,\n         edad=e02,\n         e05,\n         a25,\n         a26,\n         a27) %>% \n  sjlabelled::set_na(.,na=c(-999,-888,-777))\n```\n\n## V. Independientes\n\n### sit_empleo\n\n```{r,warning=FALSE,message=FALSE}\n# Situación empleo\ndata <- data %>%\n  mutate(\n    a07 = data$a07 %>%\n      set_labels(label = \"Situación de empleo\", \n                 labels = c(\n                   \"Patrón(a) o empleador(a)\" = 1,\n                   \"Trabajador(a) por cuenta propia\" = 2,\n                   \"Empleado(a) u obrero(a) del sector público (Gobierno Central o Municipal)\" = 3,\n                   \"Empleado(a) u obrero(a) de empresas públicas\" = 4,\n                   \"Empleado(a) u obrero(a) del sector privado\" = 5,\n                   \"Servicio doméstico puertas adentro\" = 6,\n                   \"Servicio doméstico puertas afuera\" = 7,\n                   \"FF.AA. y del Orden\" = 8,\n                   \"Familiar no remunerado\" = 9)) %>%\n      as_factor(ref = \"labels\"))\n\nfrq(data$a07)\n\ndata <- data %>%\n  mutate(\n    sit_empleo = factor(\n      case_when(\n        as_numeric(a07) == 1 ~ \"Empleador(a)\",\n        as_numeric(a07) == 2 ~ \"Autoempleado(a)\",\n        as_numeric(a07) >= 3 ~ \"Empleado(a)\",\n        TRUE ~ NA_character_),\n      levels = c(\"Empleador(a)\",\"Autoempleado(a)\",\"Empleado(a)\")))\n\nfrq(data$sit_empleo)\n```\n\n### sindicato\n\n```{r,warning=FALSE,message=FALSE}\n# Sindicatos en empresas\ndata <- data %>%\n  mutate(sindicato=if_else(b19==1,1,0))\n\nfrq(data$sindicato)\n```\n\n### af_sindical\n\n```{r,warning=FALSE,message=FALSE}\n# Afiliación sindical\ndata <- data %>%\n  mutate(af_sindical = if_else(b21==1|b21==2,1,0))\n\nfrq(data$af_sindical)\n```\n\n## V. Dependientes\n\n### participacion\n\n```{r}\n# Frecuencia participación: Firmar carta o petición\ndata <- data %>%\n  mutate(part_firma=if_else(c04_01==1,0,1))\n\nfrq(data$part_firma)\n\n# Frecuencia participación: Asistir a manifestaciones\ndata <- data %>%\n  mutate(part_manifest=if_else(c04_02==1,0,1))\n\nfrq(data$part_manifest)\n\n# Frecuencia participación: Participar en huelgas\ndata <- data %>%\n  mutate(part_huelga=if_else(c04_03==1,0,1))\n\nfrq(data$part_huelga)\n\n# Frecuencia participación: Opinar por rrss\ndata <- data %>%\n  mutate(part_opinion=if_else(c04_04==1,0,1))\n\nfrq(data$part_opinion)\n```\n\n### pol_habla\n\n```{r,warning=FALSE,message=FALSE}\ndata <- data %>%\n  mutate(pol_habla=if_else(c10_01==1,0,1))\n\nfrq(data$c10_01)\nfrq(data$pol_habla)\n```\n\n### pol_convence\n\n```{r,warning=FALSE,message=FALSE}\ndata <- data %>%\n  mutate(pol_convence=if_else(c10_02==1,0,1))\n\nfrq(data$c10_02)\nfrq(data$pol_convence)\n```\n\n### pol_id\n\n```{r,warning=FALSE,message=FALSE}\n# Recodficar\ndata$pol_id <- car::recode(data$c08,\n                           recodes=c(\"c(11,12,-888,-999)='No se identifica';\n                                      c(0,1,2,3,4)='Izquierda';\n                                      c(5)='Centro';\n                                      c(6,7,8,9,10)='Derecha'\"),\n                           as.factor=TRUE, \n                           levels=c('Izquierda', \n                                    'Centro',\n                                    'Derecha',\n                                    'No se identifica'))\n\nfrq(data$pol_id)\n```\n\n## V. Mediadoras\n\n### autonomia_control\n\n```{r,warning=FALSE,message=FALSE}\ncolSums(is.na(data))\n\ndata <- data %>% \n  rowwise() %>%\n  mutate(autonomia_control = mean(c(b06_01, b06_02, b06_03, b06_04, b06_05))) %>% \n  ungroup()\n\nfrq(data$autonomia_control)\ndescr(data$autonomia_control)\n```\n\n### part_trabajo = b11\n\n```{r,warning=FALSE,message=FALSE}\nfrq(data$b11)\n```\n\n### influye_trabajo\n\n```{r,warning=FALSE,message=FALSE}\ndata <- data %>%\n  mutate(\n    influye_trabajo = case_when(\n      b11==2 ~ 0,\n      b12==1 ~ 1,\n      b12==2 ~ 2,\n      b12==3 ~ 3,\n      b12==4 ~ 4,\n      b12==5 ~ 5))\n\nfrq(data$influye_trabajo)\n```\n\n## V. Control\n\n### rama\n\n```{r}\nsum(is.na(data$a25))  # 65 casos\ntable(data$a25)\n\ndata$rama <- data$a25\n\ndata <- mutate(data,\n               rama=factor(case_when(rama==1~\"A\",\n                                     rama==2|rama==3~\"BC\",\n                                     rama==4|rama==5|rama==6~\"DEF\",\n                                     rama==7|rama==8~\"GI\",\n                                     rama==9~\"H\",\n                                     rama==10|rama==11|rama==12|rama==13|rama==14~\"JKLMN\",\n                                     rama==15~\"O\",\n                                     rama==16|rama==17~\"PQ\",\n                                     rama==18|rama==19|rama==20~\"RSU\",\n                                     rama==21~\"T\")))\n\n# Tabla de frecuencias y porcentajes\nfrq(data$rama)\n```\n\n","srcMarkdownNoYaml":""},"formats":{"html":{"identifier":{"display-name":"HTML","target-format":"html","base-format":"html"},"execute":{"fig-width":7,"fig-height":5,"fig-format":"retina","fig-dpi":96,"df-print":"default","error":false,"eval":true,"cache":null,"freeze":false,"echo":true,"output":true,"warning":true,"include":true,"keep-md":false,"keep-ipynb":false,"ipynb":null,"enabled":null,"daemon":null,"daemon-restart":false,"debug":false,"ipynb-filters":[],"engine":"knitr"},"render":{"keep-tex":false,"keep-source":false,"keep-hidden":false,"prefer-html":false,"output-divs":true,"output-ext":"html","fig-align":"default","fig-pos":null,"fig-env":null,"code-fold":"none","code-overflow":"scroll","code-link":false,"code-line-numbers":false,"code-tools":false,"tbl-colwidths":"auto","merge-includes":true,"inline-includes":false,"preserve-yaml":false,"latex-auto-mk":true,"latex-auto-install":true,"latex-clean":true,"latex-max-runs":10,"latex-makeindex":"makeindex","latex-makeindex-opts":[],"latex-tlmgr-opts":[],"latex-input-paths":[],"latex-output-dir":null,"link-external-icon":false,"link-external-newwindow":false,"self-contained-math":false,"format-resources":[],"notebook-links":true,"format-links":true},"pandoc":{"standalone":true,"wrap":"none","default-image-extension":"png","to":"html","output-file":"01-procesamiento.html"},"language":{"toc-title-document":"Table of contents","toc-title-website":"On this page","related-formats-title":"Other Formats","related-notebooks-title":"Notebooks","source-notebooks-prefix":"Source","section-title-abstract":"Abstract","section-title-appendices":"Appendices","section-title-footnotes":"Footnotes","section-title-references":"References","section-title-reuse":"Reuse","section-title-copyright":"Copyright","section-title-citation":"Citation","appendix-attribution-cite-as":"For attribution, please cite this work as:","appendix-attribution-bibtex":"BibTeX citation:","title-block-author-single":"Author","title-block-author-plural":"Authors","title-block-affiliation-single":"Affiliation","title-block-affiliation-plural":"Affiliations","title-block-published":"Published","title-block-modified":"Modified","callout-tip-title":"Tip","callout-note-title":"Note","callout-warning-title":"Warning","callout-important-title":"Important","callout-caution-title":"Caution","code-summary":"Code","code-tools-menu-caption":"Code","code-tools-show-all-code":"Show All Code","code-tools-hide-all-code":"Hide All Code","code-tools-view-source":"View Source","code-tools-source-code":"Source Code","code-line":"Line","code-lines":"Lines","copy-button-tooltip":"Copy to Clipboard","copy-button-tooltip-success":"Copied!","repo-action-links-edit":"Edit this page","repo-action-links-source":"View source","repo-action-links-issue":"Report an issue","back-to-top":"Back to top","search-no-results-text":"No results","search-matching-documents-text":"matching documents","search-copy-link-title":"Copy link to search","search-hide-matches-text":"Hide additional matches","search-more-match-text":"more match in this document","search-more-matches-text":"more matches in this document","search-clear-button-title":"Clear","search-detached-cancel-button-title":"Cancel","search-submit-button-title":"Submit","search-label":"Search","toggle-section":"Toggle section","toggle-sidebar":"Toggle sidebar navigation","toggle-dark-mode":"Toggle dark mode","toggle-reader-mode":"Toggle reader mode","toggle-navigation":"Toggle navigation","crossref-fig-title":"Figure","crossref-tbl-title":"Table","crossref-lst-title":"Listing","crossref-thm-title":"Theorem","crossref-lem-title":"Lemma","crossref-cor-title":"Corollary","crossref-prp-title":"Proposition","crossref-cnj-title":"Conjecture","crossref-def-title":"Definition","crossref-exm-title":"Example","crossref-exr-title":"Exercise","crossref-ch-prefix":"Chapter","crossref-apx-prefix":"Appendix","crossref-sec-prefix":"Section","crossref-eq-prefix":"Equation","crossref-lof-title":"List of Figures","crossref-lot-title":"List of Tables","crossref-lol-title":"List of Listings","environment-proof-title":"Proof","environment-remark-title":"Remark","environment-solution-title":"Solution","listing-page-order-by":"Order By","listing-page-order-by-default":"Default","listing-page-order-by-date-asc":"Oldest","listing-page-order-by-date-desc":"Newest","listing-page-order-by-number-desc":"High to Low","listing-page-order-by-number-asc":"Low to High","listing-page-field-date":"Date","listing-page-field-title":"Title","listing-page-field-description":"Description","listing-page-field-author":"Author","listing-page-field-filename":"File Name","listing-page-field-filemodified":"Modified","listing-page-field-subtitle":"Subtitle","listing-page-field-readingtime":"Reading Time","listing-page-field-categories":"Categories","listing-page-minutes-compact":"{0} min","listing-page-category-all":"All","listing-page-no-matches":"No matching items"},"metadata":{"lang":"en","fig-responsive":true,"quarto-version":"1.3.450","bibliography":["references.bib"],"theme":"cosmo"},"extensions":{"book":{"multiFile":true}}},"pdf":{"identifier":{"display-name":"PDF","target-format":"pdf","base-format":"pdf"},"execute":{"fig-width":5.5,"fig-height":3.5,"fig-format":"pdf","fig-dpi":300,"df-print":"default","error":false,"eval":true,"cache":null,"freeze":false,"echo":true,"output":true,"warning":true,"include":true,"keep-md":false,"keep-ipynb":false,"ipynb":null,"enabled":null,"daemon":null,"daemon-restart":false,"debug":false,"ipynb-filters":[],"engine":"knitr"},"render":{"keep-tex":false,"keep-source":false,"keep-hidden":false,"prefer-html":false,"output-divs":true,"output-ext":"pdf","fig-align":"default","fig-pos":null,"fig-env":null,"code-fold":"none","code-overflow":"scroll","code-link":false,"code-line-numbers":false,"code-tools":false,"tbl-colwidths":true,"merge-includes":true,"inline-includes":false,"preserve-yaml":false,"latex-auto-mk":true,"latex-auto-install":true,"latex-clean":true,"latex-max-runs":10,"latex-makeindex":"makeindex","latex-makeindex-opts":[],"latex-tlmgr-opts":[],"latex-input-paths":[],"latex-output-dir":null,"link-external-icon":false,"link-external-newwindow":false,"self-contained-math":false,"format-resources":[]},"pandoc":{"pdf-engine":"xelatex","standalone":true,"variables":{"graphics":true,"tables":true},"default-image-extension":"pdf","to":"pdf","output-file":"01-procesamiento.pdf"},"language":{"toc-title-document":"Table of contents","toc-title-website":"On this page","related-formats-title":"Other Formats","related-notebooks-title":"Notebooks","source-notebooks-prefix":"Source","section-title-abstract":"Abstract","section-title-appendices":"Appendices","section-title-footnotes":"Footnotes","section-title-references":"References","section-title-reuse":"Reuse","section-title-copyright":"Copyright","section-title-citation":"Citation","appendix-attribution-cite-as":"For attribution, please cite this work as:","appendix-attribution-bibtex":"BibTeX citation:","title-block-author-single":"Author","title-block-author-plural":"Authors","title-block-affiliation-single":"Affiliation","title-block-affiliation-plural":"Affiliations","title-block-published":"Published","title-block-modified":"Modified","callout-tip-title":"Tip","callout-note-title":"Note","callout-warning-title":"Warning","callout-important-title":"Important","callout-caution-title":"Caution","code-summary":"Code","code-tools-menu-caption":"Code","code-tools-show-all-code":"Show All Code","code-tools-hide-all-code":"Hide All Code","code-tools-view-source":"View Source","code-tools-source-code":"Source Code","code-line":"Line","code-lines":"Lines","copy-button-tooltip":"Copy to Clipboard","copy-button-tooltip-success":"Copied!","repo-action-links-edit":"Edit this page","repo-action-links-source":"View source","repo-action-links-issue":"Report an issue","back-to-top":"Back to top","search-no-results-text":"No results","search-matching-documents-text":"matching documents","search-copy-link-title":"Copy link to search","search-hide-matches-text":"Hide additional matches","search-more-match-text":"more match in this document","search-more-matches-text":"more matches in this document","search-clear-button-title":"Clear","search-detached-cancel-button-title":"Cancel","search-submit-button-title":"Submit","search-label":"Search","toggle-section":"Toggle section","toggle-sidebar":"Toggle sidebar navigation","toggle-dark-mode":"Toggle dark mode","toggle-reader-mode":"Toggle reader mode","toggle-navigation":"Toggle navigation","crossref-fig-title":"Figure","crossref-tbl-title":"Table","crossref-lst-title":"Listing","crossref-thm-title":"Theorem","crossref-lem-title":"Lemma","crossref-cor-title":"Corollary","crossref-prp-title":"Proposition","crossref-cnj-title":"Conjecture","crossref-def-title":"Definition","crossref-exm-title":"Example","crossref-exr-title":"Exercise","crossref-ch-prefix":"Chapter","crossref-apx-prefix":"Appendix","crossref-sec-prefix":"Section","crossref-eq-prefix":"Equation","crossref-lof-title":"List of Figures","crossref-lot-title":"List of Tables","crossref-lol-title":"List of Listings","environment-proof-title":"Proof","environment-remark-title":"Remark","environment-solution-title":"Solution","listing-page-order-by":"Order By","listing-page-order-by-default":"Default","listing-page-order-by-date-asc":"Oldest","listing-page-order-by-date-desc":"Newest","listing-page-order-by-number-desc":"High to Low","listing-page-order-by-number-asc":"Low to High","listing-page-field-date":"Date","listing-page-field-title":"Title","listing-page-field-description":"Description","listing-page-field-author":"Author","listing-page-field-filename":"File Name","listing-page-field-filemodified":"Modified","listing-page-field-subtitle":"Subtitle","listing-page-field-readingtime":"Reading Time","listing-page-field-categories":"Categories","listing-page-minutes-compact":"{0} min","listing-page-category-all":"All","listing-page-no-matches":"No matching items"},"metadata":{"block-headings":true,"bibliography":["references.bib"],"documentclass":"scrreprt"},"extensions":{"book":{"selfContainedOutput":true}}}},"projectFormats":["html","pdf"]}